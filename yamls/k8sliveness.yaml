apiVersion: extensions/v1beta1
kind: Deployment
metadata:
   name: k8sliveness
spec:
   replicas: 3
   strategy:
      type: RollingUpdate
      rollingUpdate:
         maxSurge: 1
         maxUnavailable: 1
   selector:
      matchLabels:
         env: prod
   template:  
      metadata:  
         labels:  
            env: prod
      spec:
         containers:
         -  name: k8sliveness
            image: twogghub/k8s-workshop:1.3-liveness
            livenessProbe:
               httpGet:
                  path: /healthy
                  port: 9090
               initialDelaySeconds: 5
               timeoutSeconds: 1
               periodSeconds: 10
               failureThreshold: 3
            ports:
            -  name: http
               containerPort: 9090
